<!-- Terminal Settings Component -->
<div class="settings-section" x-data="terminalSettings">
    <h2 class="settings-title">
        <span class="material-symbols-outlined">terminal</span>
        Terminal Settings
    </h2>
    
    <div class="settings-content">
        <!-- Shell Path -->
        <div class="setting-item">
            <label for="terminal-shell">Shell Path</label>
            <select id="terminal-shell" x-model="settings.shell_path" @change="updateSettings">
                <option value="/bin/bash">Bash (/bin/bash)</option>
                <option value="/bin/zsh">Zsh (/bin/zsh)</option>
                <option value="/bin/sh">Sh (/bin/sh)</option>
            </select>
            <small>Select the shell to use for terminal sessions</small>
        </div>
        
        <!-- Terminal Size -->
        <div class="setting-item">
            <label>Terminal Size</label>
            <div class="terminal-size-inputs">
                <div class="size-input">
                    <label for="terminal-rows">Rows</label>
                    <input 
                        type="number" 
                        id="terminal-rows" 
                        x-model.number="settings.rows" 
                        @change="updateSettings"
                        min="10" 
                        max="200" 
                        step="1"
                    >
                </div>
                <div class="size-input">
                    <label for="terminal-cols">Columns</label>
                    <input 
                        type="number" 
                        id="terminal-cols" 
                        x-model.number="settings.cols" 
                        @change="updateSettings"
                        min="40" 
                        max="300" 
                        step="1"
                    >
                </div>
            </div>
            <small>Default terminal window size (rows x columns)</small>
        </div>
        
        <!-- Permission Timeout -->
        <div class="setting-item">
            <label for="terminal-permission-timeout">Permission Timeout (seconds)</label>
            <input 
                type="number" 
                id="terminal-permission-timeout" 
                x-model.number="settings.permission_timeout_seconds" 
                @change="updateSettings"
                min="5" 
                max="300" 
                step="5"
            >
            <small>Time to wait for permission confirmation for sudo/delete commands</small>
        </div>
        
        <!-- Idle Timeout -->
        <div class="setting-item">
            <label for="terminal-idle-timeout">Idle Timeout (seconds)</label>
            <input 
                type="number" 
                id="terminal-idle-timeout" 
                x-model.number="settings.idle_timeout_seconds" 
                @change="updateSettings"
                min="60" 
                max="3600" 
                step="60"
            >
            <small>Automatically close terminal sessions after this period of inactivity</small>
        </div>
        
        <!-- Max Sessions -->
        <div class="setting-item">
            <label for="terminal-max-sessions">Maximum Sessions</label>
            <input 
                type="number" 
                id="terminal-max-sessions" 
                x-model.number="settings.max_sessions" 
                @change="updateSettings"
                min="1" 
                max="50" 
                step="1"
            >
            <small>Maximum number of concurrent terminal sessions</small>
        </div>
        
        <!-- Working Directory -->
        <div class="setting-item">
            <label for="terminal-working-dir">Default Working Directory</label>
            <input 
                type="text" 
                id="terminal-working-dir" 
                x-model="settings.working_dir" 
                @change="updateSettings"
                placeholder="Leave empty for home directory"
            >
            <small>Default directory for new terminal sessions</small>
        </div>
        
        <!-- Active Sessions -->
        <div class="setting-item">
            <label>Active Sessions</label>
            <div class="active-sessions">
                <template x-if="activeSessions.length === 0">
                    <div class="no-sessions">No active terminal sessions</div>
                </template>
                <template x-for="session in activeSessions" :key="session.id">
                    <div class="session-item">
                        <div class="session-info">
                            <span class="session-id" x-text="session.id"></span>
                            <span class="session-status" :class="'status-' + session.status" x-text="session.status"></span>
                            <span class="session-idle" x-text="formatIdleTime(session.idle_seconds)"></span>
                        </div>
                        <button 
                            class="btn-small btn-danger" 
                            @click="terminateSession(session.id)"
                            title="Terminate session"
                        >
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </div>
                </template>
            </div>
            <button 
                class="btn btn-secondary" 
                @click="refreshSessions"
                style="margin-top: 10px;"
            >
                <span class="material-symbols-outlined">refresh</span>
                Refresh Sessions
            </button>
        </div>
        
        <!-- Save Status -->
        <div class="setting-item" x-show="saveStatus" x-transition>
            <div class="save-status" :class="saveStatus === 'success' ? 'status-success' : 'status-error'">
                <span x-text="saveMessage"></span>
            </div>
        </div>
    </div>
</div>

<style>
.terminal-size-inputs {
    display: flex;
    gap: 15px;
}

.size-input {
    flex: 1;
}

.size-input label {
    display: block;
    font-size: 0.9em;
    margin-bottom: 5px;
}

.size-input input {
    width: 100%;
}

.active-sessions {
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 10px;
    max-height: 300px;
    overflow-y: auto;
}

.no-sessions {
    text-align: center;
    color: var(--text-secondary);
    padding: 20px;
}

.session-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    margin-bottom: 5px;
    background: var(--bg-primary);
    border-radius: 4px;
}

.session-info {
    display: flex;
    gap: 10px;
    align-items: center;
}

.session-id {
    font-family: monospace;
    font-size: 0.9em;
    color: var(--text-secondary);
}

.session-status {
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.85em;
    font-weight: 500;
}

.session-status.status-running {
    background: var(--success-bg);
    color: var(--success-text);
}

.session-status.status-idle {
    background: var(--warning-bg);
    color: var(--warning-text);
}

.session-status.status-terminated {
    background: var(--error-bg);
    color: var(--error-text);
}

.session-idle {
    font-size: 0.85em;
    color: var(--text-secondary);
}

.btn-small {
    padding: 4px 8px;
    font-size: 0.9em;
}

.btn-danger {
    background: var(--error-bg);
    color: var(--error-text);
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.btn-danger:hover {
    background: var(--error-hover);
}

.save-status {
    padding: 10px;
    border-radius: 4px;
    text-align: center;
    margin-top: 10px;
}

.status-success {
    background: var(--success-bg);
    color: var(--success-text);
}

.status-error {
    background: var(--error-bg);
    color: var(--error-text);
}
</style>
